import{Q as p}from"./QInput.5cda2caa.js";import{_ as C,a as b,u as A,r as $,k as U,o as c,e as h,w as f,M as v,N as k,O as V,g as x,f as l,Q as r}from"./index.03b738b6.js";import{a as q,Q as y}from"./use-form.1daaa51a.js";import{Q as N}from"./QPage.87ba2c34.js";import{u as S}from"./answerStore.e40d521e.js";import{u as J}from"./index.esm.f0b860bb.js";import"./use-key-composition.699ba783.js";const B=b({name:"QuestionsMakerPage",setup(){const n=J,s=A(),w=S(),t=$(JSON.parse(JSON.stringify(w.questions))),Q=async()=>{await navigator.clipboard.writeText(JSON.stringify({questions:_.value}))},_=U(()=>t.value);return{router:s,copyJson:Q,qs:t,questions:_,removeQuestion:d=>{const u=t.value.findIndex(a=>a.id===d);u>-1&&t.value.splice(u,1)},removeAnswer:(d,u)=>{const a=t.value.find(m=>m.id===d);if(a){const m=a.answers.findIndex(g=>g.id===u);m>-1&&a.answers.splice(m,1)}},addQuestion:()=>{t.value.push({id:n.v4(),question_text:"TEMP",explanation_text:"TEMP",type:"multi",answers:[]})},addAnswer:d=>{t.value.find(a=>a.id===d).answers.push({id:n.v4(),answer_text:"",explanation_text:""})},answerStore:w}}}),M={class:"text-h5 text-weight-bolder row"},O={class:"col-4"},P={class:"col-2"},E={class:"col-12"};function I(n,s,w,t,Q,_){return c(),h(N,{class:"flex flex-center row q-col-gutter-sm row"},{default:f(()=>[(c(!0),v(V,null,k(n.questions,e=>(c(),v("div",{key:e.id,class:"col-10"},[x("div",M,[l(p,{modelValue:e.question_text,"onUpdate:modelValue":o=>e.question_text=o,label:"Question",rounded:"",filled:"",class:"col-8"},null,8,["modelValue","onUpdate:modelValue"]),l(p,{modelValue:e.explanation_text,"onUpdate:modelValue":o=>e.explanation_text=o,label:"Explanation",rounded:"",filled:"",class:"col-8"},null,8,["modelValue","onUpdate:modelValue"]),x("div",O,[l(r,{color:"negative",class:"float-right",icon:"delete",round:"",onClick:o=>n.removeQuestion(e.id)},null,8,["onClick"])])]),l(q,{class:"questioncard"},{default:f(()=>[l(y,null,{default:f(()=>[l(r,{rounded:"",color:"primary",onClick:o=>e.type==="single"?e.type="multi":e.type="single",label:e.type},null,8,["onClick","label"])]),_:2},1024),l(y,{class:"row q-col-gutter-sm"},{default:f(()=>[(c(!0),v(V,null,k(e.answers,o=>(c(),v("div",{key:o.id,class:"col-6 row"},[l(p,{class:"col-10",outlined:"",rounded:"",modelValue:o.answer_text,"onUpdate:modelValue":i=>o.answer_text=i,label:"Question"},null,8,["modelValue","onUpdate:modelValue"]),l(p,{class:"col-10",outlined:"",rounded:"",modelValue:o.explanation_text,"onUpdate:modelValue":i=>o.explanation_text=i,label:"explanation"},null,8,["modelValue","onUpdate:modelValue"]),x("div",P,[l(r,{flat:"",color:"negative",icon:"delete",round:"",onClick:i=>n.removeAnswer(e.id,o.id)},null,8,["onClick"])])]))),128)),l(r,{rounded:"",color:"primary",class:"q-ma-sm",onClick:o=>n.addAnswer(e.id),label:"Add answer","no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),x("div",E,[l(r,{class:"q-ma-sm",rounded:"",color:"primary","no-caps":"",label:"Add question",onClick:s[0]||(s[0]=e=>n.addQuestion())}),l(r,{class:"q-ma-sm",rounded:"",color:"primary","no-caps":"",label:"Copy all JSON",onClick:s[1]||(s[1]=e=>n.copyJson())})])]),_:1})}var H=C(B,[["render",I]]);export{H as default};
